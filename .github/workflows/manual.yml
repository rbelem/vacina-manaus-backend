name: Update VacinaManaus data CI

on:
  workflow_dispatch:

jobs:
  update-data:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Download the latest pdf
      run: |
        make download-data
    - name: Extract
      run: |
        make extract-data
    - name: Process
      run: |
        make process-data
    - name: Get current time
      uses: 1466587594/get-current-time@v2
      id: now
      with:
        format: YYYYMMDDHHmm
        utcOffset: "-04:00"
    - name: Commit and Push
      uses: github-actions-x/commit@v2.7
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        push-branch: update-data-${{steps.now.outputs.formattedTime}}
        commit-message: 'chore: Atualiza os dados com a Ãºltima lista divulgada ${{steps.now.outputs.formattedTime}}'
        force-add: 'true'
        files: .
        name: VacinaManaus CI
        email: rodrigo.belem@gmail.com
